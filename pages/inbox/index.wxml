<view class="page">
  <view class="card">
    <view class="h">学生身份</view>
    <view class="row">
      <input class="input col" placeholder="如 S001" value="{{student_id}}" bindinput="onInputId"/>
      <button class="btn-ghost col" bindtap="saveId">保存</button>
    </view>
    <view class="tip" style="margin-top:8rpx;">首次使用请填写一次（示例：S001）</view>
  </view>

  <view class="card">
    <view class="row">
      <view class="h" style="flex:1">收件箱</view>
      <button class="btn-ghost" bindtap="refresh" style="min-width:200rpx;">刷新</button>
    </view>
    <block wx:if="{{loading}}">
      <view class="skel" style="width:70%; margin:8rpx 0;"></view>
      <view class="skel" style="width:50%; margin:8rpx 0;"></view>
      <view class="skel" style="width:80%; margin:8rpx 0;"></view>
    </block>
    <block wx:elif="{{items.length===0}}">
      <view class="tip">暂无新作业</view>
    </block>
    <block wx:else>
      <block wx:for="{{items}}" wx:key="assignment_id">
        <view style="padding:16rpx 0; border-bottom:1px solid #f5f5f5;">
          <view style="font-weight:600">{{item.title}}</view>
          <view class="small">{{item.note}}</view>
          <view class="small" style="color:#999">来自：{{item.from}} · 时间：{{item.created_at}}</view>
          <button class="btn-ghost" style="margin-top:10rpx" bindtap="open" data-id="{{item.assignment_id}}">查看详情</button>
        </view>
      </block>
    </block>
  </view>
</view>
